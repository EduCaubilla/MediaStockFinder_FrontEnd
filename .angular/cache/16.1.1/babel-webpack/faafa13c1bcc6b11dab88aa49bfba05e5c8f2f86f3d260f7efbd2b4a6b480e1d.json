{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/request.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nfunction UserDeskComponent_tr_28_img_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 32);\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"src\", item_r1 == null ? null : item_r1.imageThumb, i0.ɵɵsanitizeUrl);\n    i0.ɵɵattribute(\"data-id\", item_r1 == null ? null : item_r1.idFont)(\"data-font\", item_r1 == null ? null : item_r1.font);\n  }\n}\nfunction UserDeskComponent_tr_28_video_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"video\", 33);\n    i0.ɵɵelement(1, \"source\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r1 == null ? null : item_r1.imageSmall, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction UserDeskComponent_tr_28_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵelement(1, \"img\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", item_r1 == null ? null : item_r1.imageLarge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction UserDeskComponent_tr_28_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36)(1, \"a\", 14)(2, \"video\", 37);\n    i0.ɵɵelement(3, \"source\", 34);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const item_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"#ref\", item_r1 == null ? null : item_r1.idFont, \"\", i0.ɵɵsanitizeUrl)(\"target\", \"#ref\", item_r1 == null ? null : item_r1.idFont, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", item_r1 == null ? null : item_r1.imageLarge, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction UserDeskComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"th\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"th\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\", 12);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\", 12);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\", 13)(10, \"a\", 14);\n    i0.ɵɵtemplate(11, UserDeskComponent_tr_28_img_11_Template, 1, 3, \"img\", 15);\n    i0.ɵɵtemplate(12, UserDeskComponent_tr_28_video_12_Template, 2, 1, \"video\", 16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"th\", 12)(14, \"a\", 14)(15, \"button\", 17);\n    i0.ɵɵtext(16, \"View\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function UserDeskComponent_tr_28_Template_button_click_17_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.toMediaPage($event));\n    });\n    i0.ɵɵtext(18, \" Open \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"th\", 12)(20, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function UserDeskComponent_tr_28_Template_button_click_20_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.triggerDownload($event));\n    });\n    i0.ɵɵtext(21, \" Download \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function UserDeskComponent_tr_28_Template_button_click_22_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.onDelete($event));\n    });\n    i0.ɵɵtext(23, \" Delete \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"div\", 21)(25, \"div\", 22)(26, \"div\", 23)(27, \"div\", 24)(28, \"h6\", 25);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"button\", 26)(31, \"span\", 27);\n    i0.ɵɵtext(32, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(33, UserDeskComponent_tr_28_div_33_Template, 2, 1, \"div\", 28);\n    i0.ɵɵtemplate(34, UserDeskComponent_tr_28_div_34_Template, 4, 3, \"div\", 29);\n    i0.ɵɵelementStart(35, \"div\", 30)(36, \"div\", 31)(37, \"h6\");\n    i0.ɵɵtext(38);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(39, \"p\");\n    i0.ɵɵtext(40);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(41, \"a\", 19);\n    i0.ɵɵlistener(\"click\", function UserDeskComponent_tr_28_Template_a_click_41_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.triggerDownload($event));\n    });\n    i0.ɵɵtext(42, \" Download \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function UserDeskComponent_tr_28_Template_button_click_43_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.toMediaPage($event));\n    });\n    i0.ɵɵtext(44, \" Open \");\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.font);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.media);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"#ref\", item_r1.idFont, \"\", i0.ɵɵsanitizeUrl)(\"target\", \"#ref\", item_r1.idFont, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r1.media === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r1.media === \"video\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"#ref\", item_r1.idFont, \"\", i0.ɵɵsanitizeUrl)(\"target\", \"#ref\", item_r1.idFont, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"data-media\", item_r1 == null ? null : item_r1.media)(\"data-id\", item_r1 == null ? null : item_r1.idFont)(\"data-font\", item_r1 == null ? null : item_r1.font);\n    i0.ɵɵadvance(3);\n    i0.ɵɵattribute(\"data-media\", item_r1 == null ? null : item_r1.media)(\"data-font\", item_r1 == null ? null : item_r1.font)(\"data-link\", item_r1 == null ? null : item_r1.imageLarge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"data-id\", item_r1 == null ? null : item_r1._id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"ref\", item_r1.idFont, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"\", item_r1.idFont, \"Label\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", item_r1.authorName, \" | \", item_r1.font, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", item_r1.media === \"image\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r1.media === \"video\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(item_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r1.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"data-media\", item_r1 == null ? null : item_r1.media)(\"data-font\", item_r1 == null ? null : item_r1.font)(\"data-link\", item_r1 == null ? null : item_r1.imageLarge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"data-id\", item_r1 == null ? null : item_r1.idFont)(\"data-font\", item_r1 == null ? null : item_r1.font);\n  }\n}\nconst _c0 = function () {\n  return [\"/home\"];\n};\nexport let UserDeskComponent = /*#__PURE__*/(() => {\n  class UserDeskComponent {\n    request;\n    router;\n    user;\n    arrDesk;\n    arrList;\n    token;\n    id;\n    isLogged;\n    response$;\n    constructor(request, router) {\n      this.request = request;\n      this.router = router;\n    }\n    ngOnInit() {\n      this.isLogged = this.request.getLogged();\n      console.log(this.isLogged);\n      this.refreshUser();\n    }\n    refreshUser() {\n      this.id = localStorage.getItem('id');\n      this.user = this.request.getUser();\n      console.log(this.user);\n      if (this.user === undefined && this.id !== null) {\n        this.response$ = this.request.searchUser$(this.id);\n        return this.response$.subscribe(data => {\n          console.log('VUELVE EL USER ACTUALIZADO ', data);\n          this.user = data.user;\n          this.arrDesk = this.user.desk;\n          console.log(this.arrDesk);\n          this.request.newRefreshUser(this.user);\n          this.typeOfMedia();\n        }, error => console.log(error));\n      } else {\n        this.arrDesk = this.user.desk;\n        this.typeOfMedia();\n      }\n    }\n    onDelete($event) {\n      console.log($event.target.dataset.id);\n      const id = $event.target.dataset.id;\n      const newData = this.user.desk.filter(item => item._id !== id);\n      this.user.desk = newData;\n      this.response$ = this.request.updateUser$(this.user);\n      return this.response$.subscribe(data => {\n        console.log('VUELVE EL USER ACTUALIZADO ', data);\n        this.user = data;\n        this.arrDesk = this.user.desk;\n        this.typeOfMedia();\n      }, error => console.log(error));\n    }\n    typeOfMedia() {\n      this.arrList = this.arrDesk;\n      const list = this.arrList;\n      for (const item of list) {\n        const type = item.imageMedium.substring(8, 14);\n        console.log(type);\n        if (type === 'player') {\n          item.media = 'video';\n        } else {\n          item.media = 'image';\n        }\n      }\n      console.log(this.arrList);\n      console.log(this.arrDesk);\n    }\n    triggerDownload($event) {\n      const media = $event.target.dataset.media;\n      const type = $event.target.dataset.font;\n      const link = $event.target.dataset.link;\n      media === 'video' ? this.triggerDownloadVideo(link) : this.triggerDownloadPhoto(link, type);\n    }\n    triggerDownloadPhoto(link, type) {\n      const URL_API_DOWNLOADPHOTO = `${environment.API_URL}/photo/download/${type}/${link}`;\n      window.location.assign(URL_API_DOWNLOADPHOTO);\n    }\n    triggerDownloadVideo(link) {\n      const reqLink = btoa(`${link}`);\n      console.log(link);\n      const URL_API_DOWNLOADVIDEO = `${environment.API_URL}/video/download/${reqLink}`;\n      window.location.assign(URL_API_DOWNLOADVIDEO);\n    }\n    toMediaPage($event) {\n      const type = $event.target.dataset.font;\n      const id = $event.target.dataset.id;\n      const media = $event.target.dataset.media;\n      console.log(type);\n      console.log(id);\n      console.log(media);\n      media === 'video' ? this.router.navigate([`/video-page/${type}/${id}`]) : this.router.navigate([`/photo-page/${type}/${id}`]);\n    }\n    static ɵfac = function UserDeskComponent_Factory(t) {\n      return new (t || UserDeskComponent)(i0.ɵɵdirectiveInject(i1.RequestService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserDeskComponent,\n      selectors: [[\"app-user-desk\"]],\n      decls: 32,\n      vars: 4,\n      consts: [[1, \"container\"], [1, \"search-header\", \"px-3\", \"py-4\", \"pt-md-4\", \"pb-md-2\", \"mr-auto\"], [1, \"container-fluid\"], [1, \"row\", \"my-4\"], [1, \"col-12\", 2, \"margin\", \"0 auto\"], [1, \"table\", \"table-hover\"], [\"scope\", \"col\"], [\"scope\", \"col\", 1, \"text-center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", \"btn-lg\", \"col-4\", 2, \"margin\", \"0 auto\", 3, \"routerLink\"], [\"scope\", \"row\", 1, \"lista\", \"my_title\"], [\"scope\", \"row\", 1, \"lista\"], [\"scope\", \"row\", 1, \"lista\", \"text-center\"], [\"data-toggle\", \"modal\", 3, \"href\", \"target\"], [3, \"src\", 4, \"ngIf\"], [\"width\", \"255\", \"height\", \"170.8\", \"oncanplay\", \"this.muted=true\", \"onmouseover\", \"this.play()\", \"onmouseout\", \"this.pause()\", 4, \"ngIf\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-sm\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-outline-secondary\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-outline-secondary\", \"btn-sm\", 3, \"click\"], [1, \"btn\", \"btn-outline-danger\", \"btn-sm\", 3, \"click\"], [\"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\", \"fade\", 3, \"id\"], [1, \"modal-dialog\", \"modal-lg\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\", \"mr-auto\", 3, \"id\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"], [\"class\", \"modal-body mx-auto\", 4, \"ngIf\"], [\"class\", \"videowrapper embed-responsive embed-responsive-16by9\", \"style\", \" --aspect-ratio: 9 /\\n                        16;\", 4, \"ngIf\"], [1, \"modal-footer\"], [1, \"footer-text\", \"mr-auto\", \"align-bottom\"], [3, \"src\"], [\"width\", \"255\", \"height\", \"170.8\", \"oncanplay\", \"this.muted=true\", \"onmouseover\", \"this.play()\", \"onmouseout\", \"this.pause()\"], [\"type\", \"video/mp4\", 3, \"src\"], [1, \"modal-body\", \"mx-auto\"], [1, \"videowrapper\", \"embed-responsive\", \"embed-responsive-16by9\", 2, \"--aspect-ratio\", \"9 /\\n                        16\"], [\"wwidth\", \"960\", \"height\", \"540\", \"frameborder\", \"0\", \"controls\", \"\", \"id\", \"video\", \"allowscriptaccess\", \"always\", \"allow\", \"autoplay\"]],\n      template: function UserDeskComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"main\")(1, \"div\", 0)(2, \"div\", 1)(3, \"h3\");\n          i0.ɵɵtext(4);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(5, \"p\");\n          i0.ɵɵtext(6, \"This is your personal space to manage saved assets.\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(7, \"div\", 2)(8, \"div\", 3)(9, \"div\", 4)(10, \"table\", 5)(11, \"thead\")(12, \"tr\")(13, \"th\", 6);\n          i0.ɵɵtext(14, \"Title\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"th\", 6);\n          i0.ɵɵtext(16, \"Description\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(17, \"th\", 6);\n          i0.ɵɵtext(18, \"Source\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"th\", 6);\n          i0.ɵɵtext(20, \"Type\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(21, \"th\", 7);\n          i0.ɵɵtext(22, \"Media\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"th\", 7);\n          i0.ɵɵtext(24, \"Options\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(25, \"th\", 6)(26, \"th\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(27, \"tbody\");\n          i0.ɵɵtemplate(28, UserDeskComponent_tr_28_Template, 45, 30, \"tr\", 8);\n          i0.ɵɵelementEnd()()()()();\n          i0.ɵɵelementStart(29, \"div\", 9)(30, \"button\", 10);\n          i0.ɵɵtext(31, \" Go search \");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(4);\n          i0.ɵɵtextInterpolate1(\"Hi \", ctx.user.name, \", welcome to your Desk\");\n          i0.ɵɵadvance(24);\n          i0.ɵɵproperty(\"ngForOf\", ctx.arrList);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(3, _c0));\n        }\n      },\n      dependencies: [i3.NgForOf, i3.NgIf, i2.RouterLink],\n      styles: [\"main[_ngcontent-%COMP%]{padding-top:4rem;font-family:Lato,sans-serif;font-size:16px}h3[_ngcontent-%COMP%]{font-size:3rem;font-weight:100;line-height:1.1}p[_ngcontent-%COMP%]{color:#a0a0a0;letter-spacing:1.1px;font-weight:100}.btn-outline-secondary[_ngcontent-%COMP%]{border-color:#a0a0a0;color:#a0a0a0}.btn-outline-secondary[_ngcontent-%COMP%]:hover, .fa[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%]:hover{border-color:#555;background:white;color:#000}.lista[_ngcontent-%COMP%]{font-weight:200}.my_title[_ngcontent-%COMP%]{font-weight:400}.lista[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:15vh;width:auto}.loading[_ngcontent-%COMP%]{width:3rem;height:auto;margin:0 auto;padding:5rem}.main[_ngcontent-%COMP%]{max-height:75vh}.btn[_ngcontent-%COMP%]{margin:.1rem}.container-fluid[_ngcontent-%COMP%]{padding:0 8rem}.row[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.embed-responsive[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{padding:1rem}.modal-body[_ngcontent-%COMP%]{height:55vh}.modal-body[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:51vh!important}@media screen and (max-width: 799px){.column[_ngcontent-%COMP%]{flex:50%;max-width:50%}}@media screen and (max-width: 600px){.column[_ngcontent-%COMP%]{flex:100%;max-width:100%}}\"]\n    });\n  }\n  return UserDeskComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}